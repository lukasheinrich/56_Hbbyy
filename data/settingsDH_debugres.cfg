# Configuration for the Moriond 2016 resonant di-Higgs analysis
# Creator: Andrew Hard
# Email: ahard@cern.ch
# Date: 01/14/2016

################################################################################
# Global analysis settings:

JobName:		January13

Verbose: 		YES

DoBlind: 		YES

# Luminosity in pb-1:
AnalysisLuminosity: 	3200

HiggsMass: 		125.09

# Either Resonant or NonResonant:
AnalysisType: 		Resonant

# Single Higgs production mode information:
SigSHModes: 		ggH VBF WH ZH ttH

# Di-Higgs production mode information:
SigDHModes: 		NonRes ResonantMx300
AcceptanceXEfficiency: 	0.074
AcceptanceXEfficiencyResonant: 0.043
BranchingRatiobbyy: 	0.00264

################################################################################
# The settings:

ATLASLabel:		Simulation Internal

################################################################################
# STATISTICAL MODEL:

UseSystematics:		NO

##### Categorization information:

# Make Sure control region(s) always first, for fit to create Asimov data:
CateNames:		jj bb
PrintCateName_jj: 	0 b-tagged category
PrintCateName_bb: 	2 b-tagged category

# Types of expectation terms to add:
ExpectationTypes: 	res scale yield

Model_PoI:		mu_SigBSM2H[0.0,-100,1000]

# List systematic sources (uncorrelated systematics should be listed individually (e.g. bias):
SysSources:		lumi isEM ERes EScale Migr BkgMod_bb

# Systematics:
SysForm_lumi:		lumi[constr=logn,center=1.0,type=yield,comp=Common~0.028]
SysForm_isEM: 		isEM[constr=logn,center=1.0,type=yield,comp=Common~0.028]
SysForm_ERes: 		ERes[constr=gaus,center=1.0,type=res,comp=SigSM_bb~0.13,comp=SigBSM2H_bb~0.10]
SysForm_EScale: 	EScale[constr=gaus,center=0.0,type=scale,comp=SigSM_bb~0.004,comp=SigBSM2H_bb~0.004]
# Migration example (can affect multiple fit components in multiple categories:
SysForm_Migr:		Migr[constr=logn,center=1.0,type=yield,comp=SigBSM2H_bb~0.001,comp=SigSM_bb~-0.001]
# Spurious signal:
SysForm_BkgMod_bb:	BkgMod_bb[constr=gaus,center=0.0,type=yield,comp=Bias_bb~0.001]

#################### MODEL FOR CATEGORY = jj:

##### The observable in category jj:
OBS_jj:			m_yyjj[200,1000]
OBSPrint_jj:		M_{jj#gamma#gamma} [GeV]

##### Non-systematic variables in category jj:
VARS_jj:		n_BkgNonHiggs_jj[50,0,1000000] muLA_BkgNonHiggs[295.51,250,400] sigmaLA_BkgNonHiggs[28.38,10,50]

##### Functions, Expressions in category jj:
EXPRS_jj:	 	sum::n_AllProcesses_jj(n_BkgNonHiggs_jj)

##### PDF in category bbs:
PDFS_jj:		RooLandau::pdf_BkgNonHiggs_jj(m_yyjj,muLA_BkgNonHiggs,sigmaLA_BkgNonHiggs)

##### Complete model in category jj:
MODEL_jj:		SUM::modelSB_jj(n_BkgNonHiggs_jj*pdf_BkgNonHiggs_jj)

#################### MODEL FOR CATEGORY = bb:

##### The observable in category bb:
OBS_bb:			m_yybb[200,1000]
OBSPrint_bb:		M_{bb#gamma#gamma} [GeV]

##### Non-systematic variables in category bb:
# WARNING!!! expectations here should be removed once associated systematics are added!
VARS_bb:		nPerFb_SigBSM2H_bb[0.5279] n_BkgNonHiggs_bb[5,0,10000] muCBNom_SigBSM2H_bb[300.00] sigmaCBNom_SigBSM2H_bb[3.15] alphaCBLo_SigBSM2H_bb[0.97] nCBLo_SigBSM2H_bb[9.00] alphaCBHi_SigBSM2H_bb[0.96] nCBHi_SigBSM2H_bb[5.00]

##### Functions, Expressions in category bb:
EXPRS_bb:	 	prod::n_SigBSM2H_bb(val_SigBSM2H_bb[1.68928],mu_SigBSM2H) sum::n_AllProcesses_bb(n_BkgNonHiggs_bb,n_SigBSM2H_bb)

##### PDF in category bb:
PDFS_bb:		RooLandau::pdf_BkgNonHiggs_bb(m_yybb,muLA_BkgNonHiggs,sigmaLA_BkgNonHiggs) HggTwoSidedCBPdf::pdf_SigBSM2H_bb(m_yybb,prod::muCB_SigBSM2H_bb(muCBNom_SigBSM2H_bb),prod::sigmaCB_SigBSM2H_bb(sigmaCBNom_SigBSM2H_bb),alphaCBLo_SigBSM2H_bb,nCBLo_SigBSM2H_bb,alphaCBHi_SigBSM2H_bb,nCBHi_SigBSM2H_bb)

#PDFS_bb:		RooExponential::pdf_BkgNonHiggs_bb(m_yybb,exp_BkgNonHiggs[-0.001]) HggTwoSidedCBPdf::pdf_SigBSM2H_bb(m_yybb,prod::muCB_SigBSM2H_bb(muCBNom_SigBSM2H_bb),prod::sigmaCB_SigBSM2H_bb(sigmaCBNom_SigBSM2H_bb),alphaCBLo_SigBSM2H_bb,nCBLo_SigBSM2H_bb,alphaCBHi_SigBSM2H_bb,nCBHi_SigBSM2H_bb)

##### Complete model in category bb:
MODEL_bb:		SUM::modelSB_bb(n_BkgNonHiggs_bb*pdf_BkgNonHiggs_bb,n_SigBSM2H_bb*pdf_SigBSM2H_bb)

################################################################################
# General directory structures:

# Location of global input files:
MasterInput: 		/afs/cern.ch/work/a/ahard/files_Hbbgg/GlobalInputs

# Location of output directory:
MasterOutput:		/afs/cern.ch/work/a/ahard/files_Hbbgg/FullAnalysis
  
# Location of this software package:
PackageLocation:	/afs/cern.ch/user/a/ahard/analysis/56_Hbbyy

################################################################################
# Input MxAOD locations:

MxAODDirectory: 	/afs/cern.ch/user/a/ahard/work_directory/files_Hbbgg/GlobalInputs/inputs_13TeV/MxAODs

################################################################################
# Settings for remote job submission:

# Holding location of cluster job files:
clusterFileLocation:	/afs/cern.ch/work/a/ahard/jobfiles

exeWorkspace: 		DHWorkspaceWrapper
jobScriptWorkspace: 	scripts/jobFileWorkspace.sh

exeTestStat: 		DHTestStatWrapper
jobScriptTestStat: 	scripts/jobFileTestStat.sh

exeMuLimit: 		DHMuLimit
jobScriptMuLimit: 	scripts/jobFileMuLimit.sh

exePseudoExp: 		DHPseudoExp
jobScriptPseudoExp: 	scripts/jobFilePseudoExp.sh

# End of configuration.
