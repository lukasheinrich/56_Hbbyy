# Example config file for signal parameterization.
# Andrew Hard - ahard@cern.ch
# July 31, 2015

################################################################################
# Global analysis settings:

jobName:		August18

#doBlind: 		YES
doBlind: 		NO

analysisLuminosity: 	20300

higgsMass: 		125.0

DHMyyRangeLo: 		105.0
DHMyyRangeHi:		160.0

DHMyybbRangeLo: 	200.0
DHMyybbRangeHi:		900.0

#NonRes also an  option:
analysisTypes: 		Resonant

# Single Higgs production mode information:
sigSHModes: 		ggH VBF WH ZH ttH

# Di-Higgs production mode information:
sigDHModes: 		NonRes ResonantMx300
acceptanceXEfficiency: 	0.074
acceptanceXEfficiencyResonant: 0.043
bbyyBranchingRatio: 	0.00264

# Other MC information:
MCProcesses: 		gg_gjet

################################################################################
# Categorization information:

cateNames:		jj bb

componentsResonantCR: 	BkgNonRes
componentsResonantSR: 	SigBSM2H BkgNonRes SigSMggH SigSMVBF SigSMWH SigSMZH SigSMttH Bias

################################################################################
# STATISTICAL MODEL:

MODEL_POI:		npbBSM

# Model in category jj:
MODEL_jj:		SUM::modelSB(n_BkgNonRes_jj*pdf_BkgNonRes_jj)



# Category: bb
# The observable:
OBS_bb:			m_yybb[0,1000]

# Non-systematic variables:
VARS_bb:		
n_BkgNonRes_bb[500,0,1000000] 
n_Bias_bb[1.0]
nomN_SigSMggH_bb[1.0] 
nomN_SigSMVBF_bb[1.0] 
nomN_SigSMWH_bb[1.0] 
nomN_SigSMZH_bb[1.0] 
nomN_SigSMttH_bb[1.0] 
nomN_SigBSM2H_bb[1.0]

# NOTE: prod::expectation() should be defined in workspace!
# Things like prod::nsig_BSM, which multiply terms. 
EXPRS_bb:		
prod::expectationCommon()
prod::expectation_SigSMggH_bb()
prod::expectation_SigSMVBF_bb()
prod::expectation_SigSMWH_bb()
prod::expectation_SigSMZH_bb()
prod::expectation_SigSMttH_bb()
prod::expectation_SigBSM2H_bb()

prod::expectationRes_SigSM_bb()
prod::expectationScale_SigSM_bb()
prod::expectationRes_SigBSM2H_bb()
prod::expectationScale_SigBSM2H_bb()

prod::n_SigSMggH_bb(nomN_SigSMggH_bb,expectationCommon,expectation_SigSMggH_bb) 
prod::n_SigSMVBF_bb(nomN_SigSMVBF_bb,expectationCommon,expectation_SigSMVBF_bb) 
prod::n_SigSMWH_bb(nomN_SigSMWH_bb,expectationCommon,expectation_SigSMWH_bb) 
prod::n_SigSMZH_bb(nomN_SigSMZH_bb,expectationCommon,expectation_SigSMZH_bb) 
prod::n_SigSMttH_bb(nomN_SigSMttH_bb,expectationCommon,expectation_SigSMttH_bb) 
prod::n_SigBSM2H_bb(nomN_SigBSM2H_bb,expectationCommon,expectation_SigBSM2H_bb)

# PDFs:
PDFS_bb:		
RooLandau::pdf_BkgNonRes_bb(m_yybb,muLANom_BkgNonRes_bb[250.0],sigmaLANom_BkgNonRes_bb[100.0])
RooLandau::pdf_SigSM_bb(m_yybb,prod::muLA_SigSM_bb(muLANom_SigSM_bb[300.0],expectationScale_SigSM_bb),prod::sigmaLA_SigSM_bb(sigmaLANom_SigSM_bb[100.0],expectationRes_SigSM_bb))
HggTwoSidedCBPdf::pdf_SigBSM2H_bb(m_yybb,prod::muCB_SigBSM2H_bb(muCBNom_SigBSM2H_bb[300.0],expectationScale_SigBSM2H_bb),prod::sigmaCB_SigBSM2H_bb(sigmaCBNom_SigBSM2H_bb[5.0],expectationRes_SigBSM2H_bb),alphaCBLo_SigBSM2H_bb[1.5],nCBLo_SigBSM2H_bb[9.0],alphaCBHi_SigBSM2H_bb[1.5],nCBHi_SigBSM2H_bb[9])

# Model in category bb:
MODEL_bb:		SUM::modelSB_bb(n_BkgNonRes_bb*pdf_BkgNonRes_bb,n_SigSMggH_bb*pdf_SigSM_bb,n_SigSMVBF_bb*pdf_SigSM_bb,n_SigSMWH_bb*pdf_SigSM_bb,n_SigSMZH_bb*pdf_SigSM_bb,n_SigSMttH_bb*pdf_SigSM_bb,n_SigBSM2H_bb*pdf_SigBSM2H_bb,nBias_bb*pdf_SigBSM2H_bb)

################################################################################
# Systematic Uncertainties:

# General types of systematic uncertainties:

# List the systematic uncertainties for each process (SigDiHiggs BkgSingleHiggs BkgNonResonant)
SysSources_SigDiHiggs: 	     isEM Iso EScale 
SysSources_BkgSingleHiggs:   isEM Iso EScale


# Form of systematic: correlation constraint_type central_value magnitude
# If uncorrelated, then there will be multiple magnitude entries (for each cate)
SysConfig_SigDiHiggs_isEM: correlated gaus 1.0 0.0245
SysConfig_SigDiHiggs_isoEM: correlated gaus 1.0 0.02

# How to deal with spurious signal??
SysSources_Bias: 	     




################################################################################
# General directory structures:

# Location of global input files:
masterInput: 		/afs/cern.ch/work/a/ahard/files_Hbbgg/GlobalInputs

# Location of output directory:
masterOutput:		/afs/cern.ch/work/a/ahard/files_Hbbgg/FullAnalysis
  
# Location of this software package:
packageLocation:	/afs/cern.ch/user/a/ahard/analysis/56_Hbbyy

################################################################################
# Input file locations:

resInput: 		/afs/cern.ch/user/a/ahard/work_directory/files_Hbbgg/GlobalInputs/inputs_8TeV/femtotuple.root

nonResInput: 		/afs/cern.ch/user/a/ahard/work_directory/files_Hbbgg/GlobalInputs/inputs_8TeV/femtotuple_gg_mass.root

singleHiggsList: 	/afs/cern.ch/user/a/ahard/work_directory/files_Hbbgg/GlobalInputs/inputs_8Te/MCList_8TeV_singleHiggs.txt

resData: 		/afs/cern.ch/user/a/ahard/work_directory/files_Hbbgg/GlobalInputs/inputs_8TeV/data12_paper.root

resSHData: 		/afs/cern.ch/user/a/ahard/work_directory/files_Hbbgg/GlobalInputs/inputs_8TeV/singleHiggsResSR.root

################################################################################
# Settings for remote job submission:

# Holding location of cluster job files:
clusterFileLocation:	/afs/cern.ch/work/a/ahard/jobfiles

exeWorkspace: 		DHWorkspaceWrapper
jobScriptWorkspace: 	scripts/jobFileWorkspace.sh

exeTestStat: 		DHTestStatWrapper
jobScriptTestStat: 	scripts/jobFileTestStat.sh

exeMuLimit: 		DHMuLimit
jobScriptMuLimit: 	scripts/jobFileMuLimit.sh

exePseudoExp: 		DHPseudoExp
jobScriptPseudoExp: 	scripts/jobFilePseudoExp.sh

# End of configuration.