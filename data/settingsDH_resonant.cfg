# Example config file for signal parameterization.
# Andrew Hard - ahard@cern.ch
# July 31, 2015

################################################################################
# Global analysis settings:

JobName:		August18

DoBlind: 		NO

AnalysisLuminosity: 	4000

HiggsMass: 		125.0

# Either Resonant or NonResonant:
AnalysisType: 		Resonant

# Single Higgs production mode information:
SigSHModes: 		ggH VBF WH ZH ttH

# Di-Higgs production mode information:
SigDHModes: 		NonRes ResonantMx300
AcceptanceXEfficiency: 	0.074
AcceptanceXEfficiencyResonant: 0.043
BranchingRatiobbyy: 	0.00264

################################################################################
# Categorization information:

# Make Sure control region(s) always first, for fit to create Asimov data:
CateNames:		jj bb

componentsResonantCR: 	BkgNonRes
componentsResonantSR: 	SigBSM2H BkgNonRes SigSMggH SigSMVBF SigSMWH SigSMZH SigSMttH Bias

################################################################################
# STATISTICAL MODEL:

Model_PoI:		npbBSM

# List systematic sources (uncorrelated systematics should be listed individually (e.g. bias):
SysSources:		lumi isEM ERes EScale Migr Bias_bb

# Systematics:
SysForm_lumi:		lumi[constr=logn,center=1.0,type=yield,comp=Common~0.028]
SysForm_isEM: 		isEM[constr=logn,center=1.0,type=yield,comp=Common~0.028]
SysForm_ERes: 		ERes[constr=gaus,center=1.0,type=res,comp=SigSM_bb~0.13,comp=SigBSM2H_bb~0.10]
SysForm_EScale: 	EScale[constr=gaus,center=0.0,type=scale,comp=SigSM_bb~0.004,comp=SigBSM2H_bb~0.004]
# Spurious signal:
SysForm_Bias_bb:	Bias_bb[constr=gaus,center=0.0,type=yield,comp=Bias_bb~0.1]
# Migration example (can affect multiple fit components in multiple categories:
SysForm_Migr:		Migr[constr=logn,center=1.0,type=yield,comp=SigBSM2H_bb~0.001,comp=SigSM_bb~-0.001]

#################### MODEL FOR CATEGORY = jj:

##### The observable in category bb:
OBS_jj:			m_yyjj[0,1000]

##### Non-systematic variables in category bb:
VARS_jj:		
n_BkgNonRes_jj[500,0,1000000] 

##### Functions, Expressions in category jj:
EXPRS_jj:

##### PDF in category bbs:
PDFS_jj:		RooLandau::pdf_BkgNonRes_jj(m_yyjj,muLANom_BkgNonRes[301.88,200.0,500.0],sigmaLANom_BkgNonRes[27.78,1.0,100.0])

##### Complete model in category jj:
MODEL_jj:		SUM::modelSB(n_BkgNonRes_jj*pdf_BkgNonRes_jj)

#################### MODEL FOR CATEGORY = bb:

##### The observable in category bb:
OBS_bb:			m_yybb[0,1000]

##### Non-systematic variables in category bb:
VARS_bb:		
n_BkgNonRes_bb[500,0,1000000] 
nomN_SigSMggH_bb[1.0] 
nomN_SigSMVBF_bb[1.0] 
nomN_SigSMWH_bb[1.0] 
nomN_SigSMZH_bb[1.0] 
nomN_SigSMttH_bb[1.0] 
nomN_SigBSM2H_bb[1.0]

##### Functions, Expressions in category bb:
EXPRS_bb:

prod::expectationCommon(mu_SigSM[1],mu_BR_gamgam[1],expectation_yield_Common)
prod::expectation_SigSMggH_bb(mu_ggH[1],expectation_yield_SigSMggH_bb)
prod::expectation_SigSMVBF_bb(mu_VBF[1],expectation_yield_SigSMVBF_bb)
prod::expectation_SigSMWH_bb(mu_WH[1],expectation_yield_SigSMWH_bb)
prod::expectation_SigSMZH_bb(mu_ZH[1],expectation_yield_SigSMZH_bb)
prod::expectation_SigSMttH_bb(mu_ttH[1],expectation_yield_SigSMttH_bb)
prod::expectation_SigBSM2H_bb(mu_SigBSM[1],expectation_yield_SigBSM2H_bb)

prod::n_SigSMggH_bb(nomN_SigSMggH_bb,expectationCommon,expectation_SigSMggH_bb) 
prod::n_SigSMVBF_bb(nomN_SigSMVBF_bb,expectationCommon,expectation_SigSMVBF_bb) 
prod::n_SigSMWH_bb(nomN_SigSMWH_bb,expectationCommon,expectation_SigSMWH_bb) 
prod::n_SigSMZH_bb(nomN_SigSMZH_bb,expectationCommon,expectation_SigSMZH_bb) 
prod::n_SigSMttH_bb(nomN_SigSMttH_bb,expectationCommon,expectation_SigSMttH_bb) 
prod::n_SigBSM2H_bb(nomN_SigBSM2H_bb,expectationCommon,expectation_SigBSM2H_bb)
prod::n_Bias_bb(expectation_yield_Bias_bb)

##### PDF in category bb:
PDFS_bb:		
RooLandau::pdf_BkgNonRes_bb(m_yybb,muLANom_BkgNonRes,sigmaLANom_BkgNonRes)
RooLandau::pdf_SigSM_bb(m_yybb,prod::muLA_SigSM_bb(muLANom_SigSM_bb[300.0],expectation_scale_SigSM_bb),prod::sigmaLA_SigSM_bb(sigmaLANom_SigSM_bb[100.0],expectation_res_SigSM_bb))
HggTwoSidedCBPdf::pdf_SigBSM2H_bb(m_yybb,prod::muCB_SigBSM2H_bb(muCBNom_SigBSM2H_bb[299.41],expectation_scale_SigBSM2H_bb),prod::sigmaCB_SigBSM2H_bb(sigmaCBNom_SigBSM2H_bb[4.58],expectation_res_SigBSM2H_bb),alphaCBLo_SigBSM2H_bb[1.45],nCBLo_SigBSM2H_bb[5.19],alphaCBHi_SigBSM2H_bb[1.8],nCBHi_SigBSM2H_bb[2.34])

##### Complete model in category bb:
MODEL_bb:		SUM::modelSB_bb(n_BkgNonRes_bb*pdf_BkgNonRes_bb,n_SigSMggH_bb*pdf_SigSM_bb,n_SigSMVBF_bb*pdf_SigSM_bb,n_SigSMWH_bb*pdf_SigSM_bb,n_SigSMZH_bb*pdf_SigSM_bb,n_SigSMttH_bb*pdf_SigSM_bb,n_SigBSM2H_bb*pdf_SigBSM2H_bb,n_Bias_bb*pdf_SigBSM2H_bb)

################################################################################
# General directory structures:

# Location of global input files:
MasterInput: 		/afs/cern.ch/work/a/ahard/files_Hbbgg/GlobalInputs

# Location of output directory:
MasterOutput:		/afs/cern.ch/work/a/ahard/files_Hbbgg/FullAnalysis
  
# Location of this software package:
PackageLocation:	/afs/cern.ch/user/a/ahard/analysis/56_Hbbyy

################################################################################
# Input MxAOD locations:

MxAODDirectory: 	/afs/cern.ch/user/a/ahard/work_directory/files_Hbbgg/GlobalInputs/inputs_13TeV/MxAODs


################################################################################
# Settings for remote job submission:

# Holding location of cluster job files:
clusterFileLocation:	/afs/cern.ch/work/a/ahard/jobfiles

exeWorkspace: 		DHWorkspaceWrapper
jobScriptWorkspace: 	scripts/jobFileWorkspace.sh

exeTestStat: 		DHTestStatWrapper
jobScriptTestStat: 	scripts/jobFileTestStat.sh

exeMuLimit: 		DHMuLimit
jobScriptMuLimit: 	scripts/jobFileMuLimit.sh

exePseudoExp: 		DHPseudoExp
jobScriptPseudoExp: 	scripts/jobFilePseudoExp.sh

# End of configuration.
